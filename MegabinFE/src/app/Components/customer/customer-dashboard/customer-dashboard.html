<div class="space-y-4">
  <!-- Header -->
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold m-0 text-surface-900">My Addresses</h1>
    <p-button label="Add Address" icon="pi pi-plus" (onClick)="navigateToAddAddress()" />
  </div>

  <!-- Search Bar -->
  <div>
    <p-iconField iconPosition="left" class="w-full">
      <p-inputIcon>
        <i class="pi pi-search" aria-hidden="true"></i>
      </p-inputIcon>
      <input
        pInputText
        type="text"
        (input)="onSearch($event)"
        placeholder="Search addresses..."
        class="w-full"
        aria-label="Search addresses"
      />
    </p-iconField>
  </div>

  @if (isMobile()) {
    <!-- Mobile Card View -->
    <div class="flex flex-col gap-3">
      @for (address of filteredAddresses(); track address.id) {
        <p-card
          class="cursor-pointer hover:shadow-md transition-shadow"
          (click)="viewAddress(address.id)"
          (keydown.enter)="viewAddress(address.id)"
          tabindex="0"
          role="button"
          [attr.aria-label]="'View address ' + address.address"
        >
          <div class="flex justify-between items-start gap-3">
            <div class="flex-1 min-w-0">
              <p class="font-medium m-0 text-surface-900 line-clamp-2">{{ address.address }}</p>
              <p class="text-sm m-0 text-surface-500 mt-1">{{ address.totalBins }} bins</p>
            </div>
            <p-tag
              [severity]="getStatusSeverity(address.addressStatus)"
              [value]="getStatusLabel(address.addressStatus)"
            />
          </div>
        </p-card>
      } @empty {
        <div class="text-center py-12">
          <i class="pi pi-inbox text-5xl text-surface-300 mb-4"></i>
          <p class="text-surface-500 m-0 mb-4">No addresses found</p>
          <p-button
            label="Add Your First Address"
            icon="pi pi-plus"
            (onClick)="navigateToAddAddress()"
          />
        </div>
      }
    </div>
  } @else {
    <!-- Desktop Table View -->
    <p-table
      [value]="filteredAddresses()"
      [tableStyle]="{ width: '100%' }"
      [scrollable]="true"
      scrollHeight="65vh"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="address">
            Address
            <p-sortIcon field="address" />
          </th>
          <th pSortableColumn="totalBins" style="width: 8rem">
            Bins
            <p-sortIcon field="totalBins" />
          </th>
          <th pSortableColumn="addressStatus" style="width: 12rem">
            Status
            <p-sortIcon field="addressStatus" />
          </th>
          <th style="width: 6rem">Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-address>
        <tr
          class="cursor-pointer hover:bg-surface-100"
          (click)="viewAddress(address.id)"
          (keydown.enter)="viewAddress(address.id)"
          tabindex="0"
          role="button"
          [attr.aria-label]="'View address ' + address.address"
        >
          <td>{{ address.address }}</td>
          <td>{{ address.totalBins }}</td>
          <td>
            <p-tag
              [severity]="getStatusSeverity(address.addressStatus)"
              [value]="getStatusLabel(address.addressStatus)"
            />
          </td>
          <td>
            <p-button
              icon="pi pi-eye"
              severity="info"
              [text]="true"
              [rounded]="true"
              pTooltip="View Details"
              ariaLabel="View address details"
            />
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4" class="text-center py-12">
            <i class="pi pi-inbox text-5xl text-surface-300 mb-4"></i>
            <p class="text-surface-500 m-0 mb-4">No addresses found</p>
            <p-button
              label="Add Your First Address"
              icon="pi pi-plus"
              (onClick)="navigateToAddAddress()"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  }
</div>
