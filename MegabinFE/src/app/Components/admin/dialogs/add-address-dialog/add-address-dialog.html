<p-dialog
  [visible]="visible()"
  header="Add Address"
  [modal]="true"
  [closable]="true"
  [dismissableMask]="true"
  (onHide)="onCancel()"
  [style]="{ width: '550px' }"
  [breakpoints]="{ '960px': '75vw', '640px': '90vw' }"
>
  <div class="flex flex-col gap-6 py-4">
    <app-autocomplete
      [placeholder]="'Search for an address...'"
      [label]="'Address'"
      (addressSelected)="onAddressSelected($event)"
    />

    @if (selectedAddress()) {
      <div class="bg-surface-100 dark:bg-surface-800 p-3 rounded-lg">
        <p class="text-sm">Selected Address:</p>
        <p class="font-medium">{{ selectedAddress()!.label }}</p>
        <p class="text-xs">
          {{ selectedAddress()!.location?.latitude }}, {{ selectedAddress()!.location?.longitude }}
        </p>
      </div>
    }

    <p-floatlabel>
      <p-inputnumber
        inputId="totalBins"
        [(ngModel)]="totalBins"
        [min]="1"
        [showButtons]="true"
        class="w-full"
      />
      <label for="totalBins">Total Bins</label>
    </p-floatlabel>

    <p-floatlabel>
      <textarea
        pTextarea
        id="addressNotes"
        [value]="addressNotes()"
        (input)="addressNotes.set($any($event.target).value)"
        rows="3"
        class="w-full"
      ></textarea>
      <label for="addressNotes">Address Notes (Optional)</label>
    </p-floatlabel>
  </div>

  <ng-template #footer>
    <div class="flex justify-end gap-2">
      <p-button
        label="Cancel"
        [text]="true"
        severity="secondary"
        (onClick)="onCancel()"
      />
      <p-button
        label="Add Address"
        (onClick)="onSave()"
        [disabled]="!selectedAddress()"
      />
    </div>
  </ng-template>
</p-dialog>
